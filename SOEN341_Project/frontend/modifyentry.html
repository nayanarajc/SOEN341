<html>

<head>
    <title>Library Catalogue</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!--===============================================================================================-->
    <link rel="icon" type="image/png" href="images/icons/favicon.ico" />
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/bootstrap/css/bootstrap.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/font-awesome-4.7.0/css/font-awesome.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="fonts/iconic/css/material-design-iconic-font.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animate/animate.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/css-hamburgers/hamburgers.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/animsition/css/animsition.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/select2/select2.min.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="vendor/daterangepicker/daterangepicker.css">
    <!--===============================================================================================-->
    <link rel="stylesheet" type="text/css" href="css/util.css">
    <link rel="stylesheet" type="text/css" href="css/main.css">
    <!--===============================================================================================-->
</head>

<body>

    <form class="login100-form validate-form">
        <div class="container-login100">
            <div class="wrap-login100-big p-l-55 p-r-55 p-t-80 p-b-30">


                <div class="output">
                    <div id="Book" class="Entry Book">
                        <div class="wrap-input100 validate-input m-b-20" data-validate="Enter Title">
                            <input class="input100" type="text" name="Title" placeholder="Title" id="Title">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input m-b-20" data-validate="Enter Author">
                            <input class="input100" type="text" name="Author" placeholder="Author" id="Author">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input m-b-20" data-validate="Enter Format">
                            <input class="input100" type="text" name="Format" placeholder="Format" id="Format">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input m-b-25" data-validate="Enter Pages">
                            <input class="input100" type="text" name="Pages" placeholder="Pages" id="Pages">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input m-b-20" data-validate="Enter Publisher">
                            <input class="input100" type="text" name="Publisher" placeholder="Publisher" id="Publisher">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input m-b-20" data-validate="Enter Language">
                            <input class="input100" type="text" name="Language" placeholder="Language" id="Language">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input m-b-20" data-validate="Enter ISBN10">
                            <input class="input100" type="text" name="ISBN10" placeholder="ISBN10" id="ISBN10">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input m-b-20" data-validate="Enter ISBN13">
                            <input class="input100" type="text" name="ISBN13" placeholder="ISBN13" id="ISBN13">
                            <span class="focus-input100"></span>
                        </div>


                    </div>

                    <div id="Magazine" class="Entry Magazine">
                        <div class="wrap-input100 validate-input-Magazine m-b-20" data-validate="Enter Title">
                            <input class="input100" type="text" name="Title" placeholder="Title" id="Title-Magazine">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input-Magazine m-b-20" data-validate="Enter Publisher">
                            <input class="input100" type="text" name="Publisher" placeholder="Publisher" id="Publisher-Magazine">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Magazine m-b-20" data-validate="Enter Language">
                            <input class="input100" type="text" name="Language" placeholder="Language" id="Language-Magazine">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Magazine m-b-20" data-validate="Enter ISBN10">
                            <input class="input100" type="text" name="ISBN10" placeholder="ISBN10" id="ISBN10-Magazine">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input-Magazine m-b-20" data-validate="Enter ISBN13">
                            <input class="input100" type="text" name="ISBN13" placeholder="ISBN13" id="ISBN13-Magazine">
                            <span class="focus-input100"></span>
                        </div>
                    </div>

                    <div id="Movie" class="Entry Movie">
                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Title">
                            <input class="input100" type="text" name="Title" placeholder="Title" id="Title-Movie">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Director">
                            <input class="input100" type="text" name="Director" placeholder="Director" id="Director-Movie">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Producers">
                            <input class="input100" type="text" name="Producers" placeholder="Producers" id="Producers-Movie">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Actors">
                            <input class="input100" type="text" name="Actors" placeholder="Actors" id="Actors-Movie">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Language">
                            <input class="input100" type="text" name="Language" placeholder="Language" id="Language-Movie">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Subtitles">
                            <input class="input100" type="text" name="Subtitles" placeholder="Subtitles" id="Subtitles-Movie">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Dubbed">
                            <input class="input100" type="text" name="Dubbed" placeholder="Dubbed" id="Dubbed-Movie">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Release Date">
                            <input class="input100" type="text" name="Release Date" placeholder="Release Date" id="Release-Date-Movie">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Movie m-b-20" data-validate="Enter Run Time">
                            <input class="input100" type="text" name="Run Time" placeholder="Run Time" id="Run-Time-Movie">
                            <span class="focus-input100"></span>
                        </div>


                    </div>

                    <div id="Music" class="Entry Music">
                        <div class="wrap-input100 validate-input-Music m-b-20" data-validate="Enter Type">
                            <input class="input100" type="text" name="Type" placeholder="Type" id="Type-Music">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input-Music m-b-20" data-validate="Enter Title">
                            <input class="input100" type="text" name="Title" placeholder="Title" id="Title-Music">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Music m-b-20" data-validate="Enter Artist">
                            <input class="input100" type="text" name="Artist" placeholder="Artist" id="Artist-Music">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input-Music m-b-20" data-validate="Enter Label">
                            <input class="input100" type="text" name="Label" placeholder="Label" id="Label-Music">
                            <span class="focus-input100"></span>
                        </div>

                        <div class="wrap-input100 validate-input-Music m-b-20" data-validate="Enter Release Date">
                            <input class="input100" type="text" name="Release Date" placeholder="Release Date" id="Release-Date-Music">
                            <span class="focus-input100"></span>
                        </div>
                        <div class="wrap-input100 validate-input-Music m-b-20" data-validate="Enter ASIN">
                            <input class="input100" type="text" name="ASIN" placeholder="ASIN" id="ASIN-Music">
                            <span class="focus-input100"></span>
                        </div>

                    </div>
                </div>

                <div class="container-login100-form-btn">
                    <button class="login100-form-btn" id="update">
                        Update
                    </button>
                </div>


            </div>
        </div>

    </form>
</body>

<!--===============================================================================================-->
<script src="vendor/jquery/jquery-3.2.1.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/animsition/js/animsition.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/bootstrap/js/popper.js"></script>
<script src="vendor/bootstrap/js/bootstrap.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/select2/select2.min.js"></script>
<!--===============================================================================================-->
<script src="vendor/daterangepicker/moment.min.js"></script>
<script src="vendor/daterangepicker/daterangepicker.js"></script>
<!--===============================================================================================-->
<script src="vendor/countdowntime/countdowntime.js"></script>
<!--===============================================================================================-->
<script src="js/main.js"></script>
<script>
    var cookieValue = document.cookie.replace(/(?:(?:^|.*;\s*)flagAdmin\s*\=\s*([^;]*).*$)|^.*$/, "$1");

    $(document).ready(function () {
        if (cookieValue === "false") {

            window.location.replace("adminlogin");
            window.alert("Please Login First");
        }
        $('.Entry').hide();
        var x = JSON.parse(localStorage.getItem("Data"));
        $('#' + x.entry).show();
        if (x.entry === 'Book') {

            $('#Title').val(x.main.Title);
            $('#Author').val(x.main.Author);
            $('#Format').val(x.main.Format);
            $('#Pages').val(x.main.Pages);
            $('#Publisher').val(x.main.Publisher);
            $('#Language').val(x.main.Language);
            $('#ISBN10').val(x.main.ISBN10);
            $('#ISBN13').val(x.main.ISBN13);
        }

        if (x.entry === 'Music') {
            $('#Type-Music').val(x.main.Type);
            $('#Title-Music').val(x.main.Title);
            $('#Artist-Music').val(x.main.Artist);
            $('#Label-Music').val(x.main.Label);
            $('#Release-Date-Music').val(x.main.Release_Date);
            $('#ASIN-Music').val(x.main.ASIN);
            // console.log($('#Type-Music').val());
        }

        if (x.entry === 'Magazine') {

            $('#Title-Magazine').val(x.main.Title);
            $('#Publisher-Magazine').val(x.main.Publisher);
            $('#Language-Magazine').val(x.main.Language);
            $('#ISBN10-Magazine').val(x.main.ISBN10);
            $('#ISBN13-Magazine').val(x.main.ISBN13);
        }

        if (x.entry === 'Movie') {
            $('#Title-Movie').val(x.main.Title);
            $('#Director-Movie').val(x.main.Director);
            $('#Producers-Movie').val(x.main.Producers);
            $('#Actors-Movie').val(x.main.Actors);
            $('#Language-Movie').val(x.main.Language);
            $('#Subtitles-Movie').val(x.main.Subtitles);
            $('#Dubbed-Movie').val(x.main.Dubbed);
            $('#Release-Date-Movie').val(x.main.Release_Date);
            $('#Run-Time-Movie').val(x.main.Run_Time);
        }
    });

    //ajax call for updating data

    $('#update').on('click', function ($event) {
        $event.preventDefault();
        var check = true;
        // if (!$("#user").val() || !$("#password").val() || !$("#FirstName").val() || !$("#Email").val() || !$("#PhoneNumber").val()) {
        //     window.alert("Enter values");
        //     check = false;
        // }

        var x = JSON.parse(localStorage.getItem("Data"));
        var entry = x.entry;
        var Data;
        if (entry === 'Book') {
            Data = JSON.stringify({
                "Title": $("#Title").val(),
                "Author": $("#Author").val(),
                "Format": $("#Format").val(),
                "Pages": $("#Pages").val(),
                "Publisher": $("#Publisher").val(),
                "Language": $("#Language").val(),
                "ISBN10": $("#ISBN10").val(),
                "ISBN13": $("#ISBN13").val()
            });
        }
        if (entry === 'Magazine') {
            Data = JSON.stringify({
                "Title": $("#Title-Magazine").val(),
                "Publisher": $("#Publisher-Magazine").val(),
                "Language": $("#Language-Magazine").val(),
                "ISBN10": $("#ISBN10-Magazine").val(),
                "ISBN13": $("#ISBN13-Magazine").val()
            })
        }

        if (entry === 'Movie') {
            Data = JSON.stringify({
                "Title": $("#Title-Movie").val(),
                "Director": $("#Director-Movie").val(),
                "Producers": $("#Producers-Movie").val(),
                "Actors": $("#Actors-Movie").val(),
                "Language": $("#Language-Movie").val(),
                "Subtitles": $("#Subtitles-Movie").val(),
                "Dubbed": $("#Dubbed-Movie").val(),
                "ReleaseDate": $("#Release-Date-Movie").val(),
                "RunTime": $("#Run-Time-Movie").val()
            })
        }
        if (entry === 'Music') {
            Data = JSON.stringify({
                "Type": $("#Type-Music").val(),
                "Title": $("#Title-Music").val(),
                "Artist": $("#Artist-Music").val(),
                "Label": $("#Label-Music").val(),
                "ReleaseDate": $("#Release-Date-Music").val(),
                "ASIN": $("#ASIN-Music").val()
            })
        }

        if (check == true) {

            $.ajax({
                type: "POST",
                url: `/api/update/${entry}/${x.main.id}`,
                contentType: "application/json; charset=utf-8",
                dataType: "json",
                data: Data,
                success: function (data) {
                    window.alert("Update-Successfull");
                    window.location.replace("modify.html");
                },
                error: function (error) {
                    console.log(error);
                    window.alert(error.responseJSON.error);
                }

            });
        }
    });


</script>

</html>